check_construction_spending_level = {
    if = {
        limit = {
            is_player = yes
        }
        if = {
            limit = {
                NOT = {
                    has_variable = construction_spending_level
                }
            }
            set_variable = {
                name = construction_spending_level
                value = 0.4
            }
        }
    }
    else = {
        set_variable = {
            name = construction_spending_level
            value = {
                if = {
                    limit = {
                        max_government_construction_spending = 0
                    }
                    value = 0
                } else = {
                    value = ai_construction_demand
                    divide = {
                        value = max_government_construction_spending
                        divide = var:construction_price_estimate
                    }
                    min = 0
                    max = 1
                }
            }
        }
    }
}